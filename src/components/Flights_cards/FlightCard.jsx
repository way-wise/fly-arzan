import React from "react";
import { useNavigate } from "react-router-dom";
import { BackendUrl } from "../../baseUrl";
import { useTranslation } from "react-i18next";
import Pagination from "@mui/material/Pagination";
import Stack from "@mui/material/Stack";
import { useCurrency } from "../../context/CurrencyContext";
import { useLocationContext } from "../../context/userLocationContext";

const Umbrella = () => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="19"
      height="19"
      viewBox="0 0 19 19"
      fill="none"
    >
      <g clipPath="url(#clip0_93_1707)">
        <path
          d="M15.637 12.9034H11.3544V7.24426H13.1695C13.1489 5.70023 12.8593 4.12895 12.3675 2.90741C11.914 1.78086 11.3233 1.08105 10.826 1.08105C10.3288 1.08105 9.7381 1.78086 9.28455 2.90741C8.7928 4.12891 8.50317 5.70023 8.48257 7.24426H10.2977V12.9034H6.90199L5.35106 11.3525C4.23938 10.2408 2.4306 10.2408 1.31895 11.3525C1.21987 11.4516 1.16418 11.5859 1.16418 11.726C1.16418 11.8661 1.21987 12.0006 1.31895 12.0996L5.13621 15.9169C5.12822 15.9369 5.12096 15.9573 5.11529 15.9787L4.74128 17.3944C4.66675 17.6764 4.83504 17.9656 5.11712 18.0401C5.16235 18.052 5.20775 18.0577 5.25241 18.0577C5.48638 18.0577 5.70028 17.9011 5.76287 17.6642L6.12783 16.2828H16.3331V17.5293C16.3331 17.8211 16.5697 18.0576 16.8615 18.0576C17.1532 18.0576 17.3898 17.8211 17.3898 17.5293V16.2828H17.9598C18.2516 16.2828 18.4881 16.0463 18.4881 15.7545C18.4882 14.1824 17.2091 12.9034 15.637 12.9034Z"
          fill="#272727"
        />
        <path
          d="M13.3477 2.51279C13.8879 3.85439 14.2054 5.56942 14.2263 7.24425H16.9893C17.281 7.24425 17.5176 7.0077 17.5176 6.71593C17.5176 3.02624 14.5158 0.0244141 10.826 0.0244141C11.8061 0.0244141 12.7017 0.908147 13.3477 2.51279Z"
          fill="#272727"
        />
        <path
          d="M8.30432 2.51279C8.95039 0.908147 9.84592 0.0244141 10.826 0.0244141C7.13625 0.0244141 4.13446 3.02624 4.13446 6.71593C4.13446 7.0077 4.37101 7.24425 4.66278 7.24425H7.42577C7.44669 5.56945 7.76421 3.85443 8.30432 2.51279Z"
          fill="#272727"
        />
      </g>
      <defs>
        <clipPath id="clip0_93_1707">
          <rect
            width="18.0334"
            height="18.0334"
            fill="white"
            transform="translate(0.809448 0.0244141)"
          />
        </clipPath>
      </defs>
    </svg>
  );
};
const Snorkeling = () => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="19"
      height="19"
      viewBox="0 0 19 19"
      fill="none"
    >
      <g clipPath="url(#clip0_93_1714)">
        <path
          d="M13.7129 0.552888V2.17354H14.7698C15.1299 2.17354 15.4851 2.23115 15.8268 2.33346V0.552888C15.8268 0.26103 15.5902 0.0244141 15.2983 0.0244141H14.2414C13.9495 0.0244141 13.7129 0.26103 13.7129 0.552888Z"
          fill="#272727"
        />
        <path
          d="M17.4112 7.98438V5.8711C17.4112 4.35703 16.1709 3.22949 14.7695 3.22949H4.20313C2.74662 3.22949 1.56152 4.41459 1.56152 5.8711V7.98438C1.56152 9.44089 2.74662 10.626 4.20313 10.626H6.31641C7.77292 10.626 8.95802 9.44089 8.95802 7.98438C8.95802 7.69289 9.19484 7.45606 9.48634 7.45606C9.77783 7.45606 10.0147 7.69289 10.0147 7.98438C10.0147 8.69793 10.2928 9.36143 10.7875 9.8428C11.2792 10.3479 11.9427 10.626 12.6563 10.626H14.7695C15.2359 10.626 15.6936 10.5021 16.0924 10.2685C16.9179 9.78708 17.4112 8.93317 17.4112 7.98438Z"
          fill="#272727"
        />
        <path
          d="M11.5996 12.7393C11.8916 12.7393 12.1279 12.503 12.1279 12.2109C12.1279 11.9189 11.8916 11.6826 11.5996 11.6826C11.4404 11.6826 7.26239 11.6826 7.37302 11.6826C7.081 11.6826 6.8447 11.9189 6.8447 12.2109C6.8447 12.503 7.081 12.7393 7.37302 12.7393H8.42966V14.3594C8.42966 15.3516 8.81403 16.2762 9.51828 16.9691C10.3078 17.7716 11.4053 18.1617 12.5566 18.0338C14.4529 17.8233 15.8262 16.1029 15.8262 14.195V11.6826H13.7129V14.3594C13.7129 15.2334 13.0019 15.9444 12.1279 15.9444C11.2539 15.9444 10.5429 15.2334 10.5429 14.3594V12.7393H11.5996Z"
          fill="#272727"
        />
      </g>
      <defs>
        <clipPath id="clip0_93_1714">
          <rect
            width="18.0334"
            height="18.0334"
            fill="white"
            transform="translate(0.469604 0.0244141)"
          />
        </clipPath>
      </defs>
    </svg>
  );
};
const Food = () => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="19"
      height="19"
      viewBox="0 0 19 19"
      fill="none"
    >
      <g clipPath="url(#clip0_93_1721)">
        <path
          d="M12.0637 8.34334L12.5035 7.90462L12.5416 7.92125C13.2033 8.2145 13.9386 8.29978 14.6499 8.16578C15.3612 8.03178 16.015 7.68483 16.5247 7.17089C18.618 5.07592 19.1437 2.31907 17.7191 0.894718C16.2945 -0.529635 13.5379 -0.00413221 11.4429 2.09027C10.9289 2.59999 10.582 3.25385 10.448 3.96522C10.314 4.67659 10.3993 5.41188 10.6926 6.07367L10.7092 6.11143L10.2702 6.55015L12.0637 8.34334Z"
          fill="#272727"
        />
        <path
          d="M1.09352 15.7273C0.855728 15.9651 0.722137 16.2876 0.722137 16.6239C0.722137 16.9602 0.855728 17.2827 1.09352 17.5205C1.33131 17.7583 1.65383 17.8919 1.99012 17.8919C2.3264 17.8919 2.64892 17.7583 2.88671 17.5205L8.87576 11.5315L7.08257 9.73828L1.09352 15.7273Z"
          fill="#272727"
        />
        <path
          d="M8.69204 6.36675L8.63146 5.21149C8.59611 4.5336 8.3107 3.8929 7.83039 3.41323L4.65651 0.239074C4.56353 0.149233 4.43899 0.0995064 4.3097 0.100604C4.18041 0.101701 4.05672 0.153535 3.96528 0.244941C3.87383 0.336347 3.82195 0.460012 3.8208 0.589301C3.81965 0.71859 3.86933 0.843159 3.95913 0.936176L6.74867 3.72571L5.85207 4.62231L3.06254 1.83277C2.97006 1.74029 2.84463 1.68834 2.71384 1.68834C2.58306 1.68834 2.45763 1.74029 2.36515 1.83277C2.27267 1.92525 2.22072 2.05068 2.22072 2.18146C2.22072 2.31225 2.27267 2.43768 2.36515 2.53016L5.15469 5.31969L4.25809 6.21629L1.46856 3.42675C1.37554 3.33695 1.25097 3.28727 1.12168 3.28842C0.992392 3.28957 0.868726 3.34145 0.77732 3.4329C0.685914 3.52434 0.63408 3.64803 0.632983 3.77732C0.631886 3.90661 0.681613 4.03115 0.771454 4.12414L3.94532 7.29801C4.42499 7.77832 5.0657 8.06373 5.74359 8.09908L6.89885 8.15966L16.2511 17.5125C16.489 17.7504 16.8116 17.884 17.148 17.884C17.4844 17.884 17.807 17.7504 18.0449 17.5125C18.2827 17.2746 18.4164 16.952 18.4164 16.6156C18.4164 16.2792 18.2827 15.9566 18.0449 15.7187L8.69204 6.36675Z"
          fill="#272727"
        />
      </g>
      <defs>
        <clipPath id="clip0_93_1721">
          <rect
            width="18.0334"
            height="18.0334"
            fill="white"
            transform="translate(0.556458 0.0244141)"
          />
        </clipPath>
      </defs>
    </svg>
  );
};

function FlightCard({
  cardData,
  notToShow = false,
  paginationToShow = false,
  count,
  page,
  onHandleChange,
  navigateTo
}) {
  const { convertPrice, currency, selectedLocalCurr } = useCurrency();
  const { userLocation } = useLocationContext();

  const { t } = useTranslation();
  const navigate = useNavigate();
  const selectLocalLang = JSON.parse(localStorage.getItem("selectLang"));

  const handleNavigate = () => {
    navigate(navigateTo);
  };

  return (
    <>
      <div>
        <div className="Sec2-card-box">
          {cardData?.map((card, index) => (
            <div className="Sec2-card" key={index}>
              <div className="Sec2-card-img">
                <img
                  src={card.imgSrc || `${BackendUrl}/uploads/${card?.image}`}
                  alt={card.title}
                />
              </div>
              <div className="Sec2-card-body">
                <h2>
                  {card?.title_Translation
                    ? card?.title_Translation[selectLocalLang?.code || "en-US"]
                    : card.title}
                </h2>

                {card?.amenities?.length > 0 ? (
                  <div className="Sec2-card-item-box">
                    {card?.amenities?.map((amenity, index) => (
                      <div key={index} className="Sec2-card-item">
                        {amenity === "Beaches" ? (
                          <Umbrella />
                        ) : amenity === "Snorkeling" ? (
                          <Snorkeling />
                        ) : amenity === "Food" ? (
                          <Food />
                        ) : (
                          ""
                        )}
                        <p>{amenity}</p>
                      </div>
                    ))}
                  </div>
                ) : (
                  <div className="Sec2-card-item-box">
                    <div className="Sec2-card-item">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="19"
                        height="19"
                        viewBox="0 0 19 19"
                        fill="none"
                      >
                        <g clipPath="url(#clip0_93_1707)">
                          <path
                            d="M15.637 12.9034H11.3544V7.24426H13.1695C13.1489 5.70023 12.8593 4.12895 12.3675 2.90741C11.914 1.78086 11.3233 1.08105 10.826 1.08105C10.3288 1.08105 9.7381 1.78086 9.28455 2.90741C8.7928 4.12891 8.50317 5.70023 8.48257 7.24426H10.2977V12.9034H6.90199L5.35106 11.3525C4.23938 10.2408 2.4306 10.2408 1.31895 11.3525C1.21987 11.4516 1.16418 11.5859 1.16418 11.726C1.16418 11.8661 1.21987 12.0006 1.31895 12.0996L5.13621 15.9169C5.12822 15.9369 5.12096 15.9573 5.11529 15.9787L4.74128 17.3944C4.66675 17.6764 4.83504 17.9656 5.11712 18.0401C5.16235 18.052 5.20775 18.0577 5.25241 18.0577C5.48638 18.0577 5.70028 17.9011 5.76287 17.6642L6.12783 16.2828H16.3331V17.5293C16.3331 17.8211 16.5697 18.0576 16.8615 18.0576C17.1532 18.0576 17.3898 17.8211 17.3898 17.5293V16.2828H17.9598C18.2516 16.2828 18.4881 16.0463 18.4881 15.7545C18.4882 14.1824 17.2091 12.9034 15.637 12.9034Z"
                            fill="#272727"
                          />
                          <path
                            d="M13.3477 2.51279C13.8879 3.85439 14.2054 5.56942 14.2263 7.24425H16.9893C17.281 7.24425 17.5176 7.0077 17.5176 6.71593C17.5176 3.02624 14.5158 0.0244141 10.826 0.0244141C11.8061 0.0244141 12.7017 0.908147 13.3477 2.51279Z"
                            fill="#272727"
                          />
                          <path
                            d="M8.30432 2.51279C8.95039 0.908147 9.84592 0.0244141 10.826 0.0244141C7.13625 0.0244141 4.13446 3.02624 4.13446 6.71593C4.13446 7.0077 4.37101 7.24425 4.66278 7.24425H7.42577C7.44669 5.56945 7.76421 3.85443 8.30432 2.51279Z"
                            fill="#272727"
                          />
                        </g>
                        <defs>
                          <clipPath id="clip0_93_1707">
                            <rect
                              width="18.0334"
                              height="18.0334"
                              fill="white"
                              transform="translate(0.809448 0.0244141)"
                            />
                          </clipPath>
                        </defs>
                      </svg>
                      <p>{card.icon1}</p>
                    </div>
                    <div className="Sec2-card-item">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="19"
                        height="19"
                        viewBox="0 0 19 19"
                        fill="none"
                      >
                        <g clipPath="url(#clip0_93_1714)">
                          <path
                            d="M13.7129 0.552888V2.17354H14.7698C15.1299 2.17354 15.4851 2.23115 15.8268 2.33346V0.552888C15.8268 0.26103 15.5902 0.0244141 15.2983 0.0244141H14.2414C13.9495 0.0244141 13.7129 0.26103 13.7129 0.552888Z"
                            fill="#272727"
                          />
                          <path
                            d="M17.4112 7.98438V5.8711C17.4112 4.35703 16.1709 3.22949 14.7695 3.22949H4.20313C2.74662 3.22949 1.56152 4.41459 1.56152 5.8711V7.98438C1.56152 9.44089 2.74662 10.626 4.20313 10.626H6.31641C7.77292 10.626 8.95802 9.44089 8.95802 7.98438C8.95802 7.69289 9.19484 7.45606 9.48634 7.45606C9.77783 7.45606 10.0147 7.69289 10.0147 7.98438C10.0147 8.69793 10.2928 9.36143 10.7875 9.8428C11.2792 10.3479 11.9427 10.626 12.6563 10.626H14.7695C15.2359 10.626 15.6936 10.5021 16.0924 10.2685C16.9179 9.78708 17.4112 8.93317 17.4112 7.98438Z"
                            fill="#272727"
                          />
                          <path
                            d="M11.5996 12.7393C11.8916 12.7393 12.1279 12.503 12.1279 12.2109C12.1279 11.9189 11.8916 11.6826 11.5996 11.6826C11.4404 11.6826 7.26239 11.6826 7.37302 11.6826C7.081 11.6826 6.8447 11.9189 6.8447 12.2109C6.8447 12.503 7.081 12.7393 7.37302 12.7393H8.42966V14.3594C8.42966 15.3516 8.81403 16.2762 9.51828 16.9691C10.3078 17.7716 11.4053 18.1617 12.5566 18.0338C14.4529 17.8233 15.8262 16.1029 15.8262 14.195V11.6826H13.7129V14.3594C13.7129 15.2334 13.0019 15.9444 12.1279 15.9444C11.2539 15.9444 10.5429 15.2334 10.5429 14.3594V12.7393H11.5996Z"
                            fill="#272727"
                          />
                        </g>
                        <defs>
                          <clipPath id="clip0_93_1714">
                            <rect
                              width="18.0334"
                              height="18.0334"
                              fill="white"
                              transform="translate(0.469604 0.0244141)"
                            />
                          </clipPath>
                        </defs>
                      </svg>
                      <p>{card.icon2}</p>
                    </div>

                    <div className="Sec2-card-item">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="19"
                        height="19"
                        viewBox="0 0 19 19"
                        fill="none"
                      >
                        <g clipPath="url(#clip0_93_1721)">
                          <path
                            d="M12.0637 8.34334L12.5035 7.90462L12.5416 7.92125C13.2033 8.2145 13.9386 8.29978 14.6499 8.16578C15.3612 8.03178 16.015 7.68483 16.5247 7.17089C18.618 5.07592 19.1437 2.31907 17.7191 0.894718C16.2945 -0.529635 13.5379 -0.00413221 11.4429 2.09027C10.9289 2.59999 10.582 3.25385 10.448 3.96522C10.314 4.67659 10.3993 5.41188 10.6926 6.07367L10.7092 6.11143L10.2702 6.55015L12.0637 8.34334Z"
                            fill="#272727"
                          />
                          <path
                            d="M1.09352 15.7273C0.855728 15.9651 0.722137 16.2876 0.722137 16.6239C0.722137 16.9602 0.855728 17.2827 1.09352 17.5205C1.33131 17.7583 1.65383 17.8919 1.99012 17.8919C2.3264 17.8919 2.64892 17.7583 2.88671 17.5205L8.87576 11.5315L7.08257 9.73828L1.09352 15.7273Z"
                            fill="#272727"
                          />
                          <path
                            d="M8.69204 6.36675L8.63146 5.21149C8.59611 4.5336 8.3107 3.8929 7.83039 3.41323L4.65651 0.239074C4.56353 0.149233 4.43899 0.0995064 4.3097 0.100604C4.18041 0.101701 4.05672 0.153535 3.96528 0.244941C3.87383 0.336347 3.82195 0.460012 3.8208 0.589301C3.81965 0.71859 3.86933 0.843159 3.95913 0.936176L6.74867 3.72571L5.85207 4.62231L3.06254 1.83277C2.97006 1.74029 2.84463 1.68834 2.71384 1.68834C2.58306 1.68834 2.45763 1.74029 2.36515 1.83277C2.27267 1.92525 2.22072 2.05068 2.22072 2.18146C2.22072 2.31225 2.27267 2.43768 2.36515 2.53016L5.15469 5.31969L4.25809 6.21629L1.46856 3.42675C1.37554 3.33695 1.25097 3.28727 1.12168 3.28842C0.992392 3.28957 0.868726 3.34145 0.77732 3.4329C0.685914 3.52434 0.63408 3.64803 0.632983 3.77732C0.631886 3.90661 0.681613 4.03115 0.771454 4.12414L3.94532 7.29801C4.42499 7.77832 5.0657 8.06373 5.74359 8.09908L6.89885 8.15966L16.2511 17.5125C16.489 17.7504 16.8116 17.884 17.148 17.884C17.4844 17.884 17.807 17.7504 18.0449 17.5125C18.2827 17.2746 18.4164 16.952 18.4164 16.6156C18.4164 16.2792 18.2827 15.9566 18.0449 15.7187L8.69204 6.36675Z"
                            fill="#272727"
                          />
                        </g>
                        <defs>
                          <clipPath id="clip0_93_1721">
                            <rect
                              width="18.0334"
                              height="18.0334"
                              fill="white"
                              transform="translate(0.556458 0.0244141)"
                            />
                          </clipPath>
                        </defs>
                      </svg>
                      <p>{card.icon3}</p>
                    </div>
                  </div>
                )}

                <div className="Sec2-card-bottom">
                  {card?.price ? (
                    <span>
                      <h2>
                        {selectedLocalCurr?.symbol ||
                          userLocation?.symbol }{" "}
                        {convertPrice(card?.price?.amount)}
                      </h2>
                      /{t(`flightFaqSection.flightCard.${card?.price?.at}`)}{" "}
                    </span>
                  ) : (
                    <span>
                      <h2>
                        {selectedLocalCurr?.symbol || userLocation?.symbol} {convertPrice(20)}
                      </h2>
                      /{t("flightFaqSection.flightCard.night")}{" "}
                    </span>
                  )}

                  {!notToShow && (
                    <>
                      {/* <Link to="/FlightsInner" className="none-list"> */}
                      <button onClick={handleNavigate}>
                        {t("buttons.book")}
                      </button>
                      {/* </Link> */}
                    </>
                  )}

                  {/* </Link> */}
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
      {paginationToShow && count > 1 && (
        <div className="pagination-div">
          <Stack spacing={2}>
            <Pagination
              count={count} // Total pages from API
              page={page} // Current page from state
              onChange={onHandleChange} // Page change handler
              shape="rounded"
            />
          </Stack>
        </div>
      )}
    </>
  );
}

export default FlightCard;
